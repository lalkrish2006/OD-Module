<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab Access Form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
      }
      .card-title {
        background: linear-gradient(90deg, #0062e6, #33aeff);
      }
      #teamMembersContainer .card {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div class="container py-5">
      <div class="card shadow-lg border-0 rounded-3">
        <div class="card-body p-4">
          <h3 class="card-title text-white p-3 rounded-3">Lab Access Form</h3>

          <form id="labForm" method="POST" action="submit_labform.php">
            <!-- Register No -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Register Number</label>
              <input
                type="text"
                class="form-control"
                name="registerNumber"
                required
              />
            </div>

            <!-- Student Name -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Student Name</label>
              <input
                type="text"
                class="form-control"
                name="studentName"
                required
              />
            </div>

            <!-- Year, Department, Section -->
            <div class="row g-3 mb-3">
              <div class="col-md-4">
                <label class="form-label fw-semibold">Year</label>
                <select class="form-select" name="year" required>
                  <option value="">Select Year</option>
                  <option>1st Year</option>
                  <option>2nd Year</option>
                  <option>3rd Year</option>
                  <option>4th Year</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-semibold">Department</label>
                <select class="form-select" name="department" required>
                  <option value="">Select Department</option>
                  <option>CSE</option>
                  <option>ECE</option>
                  <option>EEE</option>
                  <option>MECH</option>
                  <option>CIVIL</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-semibold">Section</label>
                <select class="form-select" name="section" required>
                  <option value="">Select Section</option>
                  <option>A</option>
                  <option>B</option>
                  <option>C</option>
                </select>
              </div>
            </div>

            <!-- Purpose: Internal / External -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Purpose</label>
              <div>
                <input
                  type="radio"
                  class="btn-check"
                  name="purpose"
                  id="internal"
                  value="internal"
                  autocomplete="off"
                  checked
                />
                <label class="btn btn-outline-primary me-2" for="internal"
                  >Internal</label
                >

                <input
                  type="radio"
                  class="btn-check"
                  name="purpose"
                  id="external"
                  value="external"
                  autocomplete="off"
                />
                <label class="btn btn-outline-primary" for="external"
                  >External</label
                >
              </div>
            </div>

            <!-- Internal Fields -->
            <div id="internalFields" class="mb-3">
              <label class="form-label fw-semibold">Select OD Duration</label>
              <div class="d-flex flex-column gap-2 mb-3">
                <div class="form-check">
                  <input
                    type="checkbox"
                    id="fullDay"
                    class="form-check-input"
                  />
                  <label class="form-check-label" for="fullDay"
                    >Full Day Access</label
                  >
                </div>
                <div class="form-check">
                  <input
                    type="checkbox"
                    id="periodwise"
                    class="form-check-input"
                  />
                  <label class="form-check-label" for="periodwise"
                    >Period-wise Access</label
                  >
                </div>
                <div class="form-check">
                  <input
                    type="checkbox"
                    id="daywise"
                    class="form-check-input"
                  />
                  <label class="form-check-label" for="daywise"
                    >Many Days Access</label
                  >
                </div>
              </div>

              <!-- Full Day -->
              <div id="fullDayFields" class="row g-3 mb-3 d-none">
                <div class="col-md-6">
                  <label class="form-label fw-semibold">Access Date</label>
                  <input type="date" class="form-control" name="fullDayDate" />
                </div>
              </div>

              <!-- Period-wise -->
              <div id="periodwiseFields" class="row g-3 mb-3 d-none">
                <div class="col-md-6">
                  <label class="form-label fw-semibold">From Time</label>
                  <input type="time" class="form-control" name="fromTime" />
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-semibold">To Time</label>
                  <input type="time" class="form-control" name="toTime" />
                </div>
              </div>

              <!-- Many Days -->
              <div id="daywiseFields" class="row g-3 mb-3 d-none">
                <div class="col-md-6">
                  <label class="form-label fw-semibold">From Date</label>
                  <input type="date" class="form-control" name="fromDate" />
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-semibold">To Date</label>
                  <input type="date" class="form-control" name="toDate" />
                </div>
              </div>
            </div>

            <!-- External Fields -->
            <div id="externalFields" class="d-none mb-3">
              <div class="row g-3 mb-3">
                <div class="col-md-6">
                  <label class="form-label fw-semibold">College Name</label>
                  <input type="text" class="form-control" name="collegeName" />
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-semibold">Event Name</label>
                  <input type="text" class="form-control" name="eventName" />
                </div>
              </div>
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label fw-semibold">From Date</label>
                  <input type="date" class="form-control" name="extFromDate" />
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-semibold">To Date</label>
                  <input type="date" class="form-control" name="extToDate" />
                </div>
              </div>
            </div>

            <!-- Mentor Dropdown -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Mentor</label>
              <select class="form-select" name="mentor" required>
                <option value="">Select Mentor</option>
                <option>Dr. Ravi Kumar</option>
                <option>Prof. Anitha</option>
                <option>Mr. Prakash</option>
                <option>Ms. Divya</option>
              </select>
            </div>

            <!-- Team Members -->
            <div class="mb-3">
              <label class="form-label fw-semibold"
                >Number of Team Members</label
              >
              <input
                type="number"
                class="form-control"
                id="teamCount"
                min="0"
                max="10"
                value="0"
              />
            </div>
            <div id="teamMembersContainer"></div>

            <!-- System Required Toggle -->
            <div class="mb-3">
              <label class="form-label fw-semibold">System Required</label>
              <div>
                <input
                  type="radio"
                  class="btn-check"
                  name="systemRequired"
                  id="sysYes"
                  value="Yes"
                  autocomplete="off"
                  checked
                />
                <label class="btn btn-outline-success me-2" for="sysYes"
                  >Yes</label
                >

                <input
                  type="radio"
                  class="btn-check"
                  name="systemRequired"
                  id="sysNo"
                  value="No"
                  autocomplete="off"
                />
                <label class="btn btn-outline-danger" for="sysNo">No</label>
              </div>
            </div>

            <!-- Submit -->
            <div class="text-center">
              <button type="submit" class="btn btn-primary px-4">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      const internalRadio = document.getElementById("internal");
      const externalRadio = document.getElementById("external");
      const internalFields = document.getElementById("internalFields");
      const externalFields = document.getElementById("externalFields");

      // Toggle between internal/external
      internalRadio.addEventListener("change", () => {
        if (internalRadio.checked) {
          internalFields.classList.remove("d-none");
          externalFields.classList.add("d-none");
        }
      });
      externalRadio.addEventListener("change", () => {
        if (externalRadio.checked) {
          externalFields.classList.remove("d-none");
          internalFields.classList.add("d-none");
        }
      });

      // Internal duration toggles
      const fullDay = document.getElementById("fullDay");
      const periodwise = document.getElementById("periodwise");
      const daywise = document.getElementById("daywise");

      fullDay.addEventListener("change", () => {
        periodwise.checked = false;
        daywise.checked = false;
        document
          .getElementById("fullDayFields")
          .classList.toggle("d-none", !fullDay.checked);
        document.getElementById("periodwiseFields").classList.add("d-none");
        document.getElementById("daywiseFields").classList.add("d-none");
      });

      periodwise.addEventListener("change", () => {
        fullDay.checked = false;
        daywise.checked = false;
        document
          .getElementById("periodwiseFields")
          .classList.toggle("d-none", !periodwise.checked);
        document.getElementById("fullDayFields").classList.add("d-none");
        document.getElementById("daywiseFields").classList.add("d-none");
      });

      daywise.addEventListener("change", () => {
        fullDay.checked = false;
        periodwise.checked = false;
        document
          .getElementById("daywiseFields")
          .classList.toggle("d-none", !daywise.checked);
        document.getElementById("fullDayFields").classList.add("d-none");
        document.getElementById("periodwiseFields").classList.add("d-none");
      });

      // Team members logic
      const teamCountInput = document.getElementById("teamCount");
      const teamMembersContainer = document.getElementById(
        "teamMembersContainer"
      );

      teamCountInput.addEventListener("input", () => {
        teamMembersContainer.innerHTML = "";
        const count = parseInt(teamCountInput.value) || 0;
        for (let i = 0; i < count; i++) {
          teamMembersContainer.innerHTML += `
          <div class="card p-3 mb-3 shadow-sm border-0 rounded-3 w-100">
            <h6 class="fw-bold text-secondary mb-3">Team Member ${i + 1}</h6>
            <div class="row g-3 mb-2">
              <div class="col-md-6">
                <label class="form-label fw-semibold">Name</label>
                <input type="text" class="form-control" name="member_name_${i}" required>
              </div>
              <div class="col-md-6">
                <label class="form-label fw-semibold">Register No.</label>
                <input type="number" class="form-control" name="member_regno_${i}" required>
              </div>
            </div>
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label fw-semibold">Year</label>
                <select class="form-select" name="member_year_${i}" required>
                  <option value="">Select Year</option>
                  <option>1st Year</option>
                  <option>2nd Year</option>
                  <option>3rd Year</option>
                  <option>4th Year</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-semibold">Department</label>
                <select class="form-select" name="member_department_${i}" required>
                  <option value="">Select Dept</option>
                  <option>CSE</option>
                  <option>ECE</option>
                  <option>EEE</option>
                  <option>MECH</option>
                  <option>CIVIL</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-semibold">Section</label>
                <select class="form-select" name="member_section_${i}" required>
                  <option value="">Select Section</option>
                  <option>A</option>
                  <option>B</option>
                  <option>C</option>
                </select>
              </div>
            </div>
          </div>
        `;
        }
      });

    </script>
  </body>
</html>
